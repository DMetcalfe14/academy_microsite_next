(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{4913:(e,t,s)=>{Promise.resolve().then(s.bind(s,6306))},6306:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(5155),a=s(2115),l=s(6046),n=s(1950),o=s(4708),i=s(9327),c=s(5217);let m=e=>{let{label:t,checked:s,onChange:a}=e,l=t.toLowerCase().replace(/\s+/g,"_");return(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsx)("input",{id:l,type:"checkbox",className:"h-4 w-4 accent-primary border-gray-300 rounded focus:outline focus:outline-2 focus:outline-offset-2 focus:outline-primary",checked:s,onChange:a,"aria-checked":s}),(0,r.jsx)("label",{htmlFor:l,className:"ml-3 text-sm text-gray-900",children:t})]})},d=()=>(0,r.jsxs)("div",{className:"flex items-center mb-2","aria-hidden":"true",children:[(0,r.jsx)("div",{className:"w-5 h-5 bg-gray-400 animate-pulse rounded mr-2",role:"presentation"}),(0,r.jsx)("div",{className:"h-4 w-32 bg-gray-400 animate-pulse rounded",role:"presentation"})]});function u(){let e=(0,l.useSearchParams)(),[t,s]=(0,a.useState)([]),[u,p]=(0,a.useState)([]),[h,g]=(0,a.useState)([]),[x,b]=(0,a.useState)(""),[f,j]=(0,a.useState)(""),[y,w]=(0,a.useState)(""),[v,N]=(0,a.useState)(1),[k,C]=(0,a.useState)({categories:!0,types:!0,programmes:!0,locations:!0}),{data:S,isLoading:A}=(0,n.u)(),{courses:O=[]}=S,E=[...new Set([...O.flatMap(e=>e.categories)||[]])],L=[...new Set(O.map(e=>e.type))],P=[...new Set(O.map(e=>e.programme).filter(Boolean))],_=[...new Set(O.filter(e=>"Event"===e.type).flatMap(e=>e.events?e.events.map(e=>e.location):[]))];(0,a.useEffect)(()=>{let t=e.get("query")||"",r=e.get("category"),a=e.get("type"),l=e.get("programme"),n=e.get("location");r&&s(r.split(",")),a&&p(a.split(",")),l&&g(l.split(",")),n&&b(n),j(t),w(t)},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{w(f),""!=f&&setLocation("Searching with query: ".concat(f)),M()},1e3);return()=>clearTimeout(e)},[f]);let M=()=>{N(1)},R=e=>{s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),M()},T=e=>{p(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),M()},B=e=>{g(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),M()},F=e=>{b(t=>t===e?"":e),M()},q=e=>{C(t=>({...t,[e]:!t[e]}))};return(0,r.jsx)("main",{"aria-label":"Search results",children:(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)("aside",{className:"grid-cols-1","aria-labelledby":"filters-heading",children:[(0,r.jsx)("h1",{id:"filters-heading",className:"text-2xl font-semibold mb-4",children:"Filters"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("button",{onClick:()=>q("categories"),className:"flex items-center justify-between w-full text-md font-semibold mb-2",children:["Categories",k.categories?(0,r.jsx)(o.A,{}):(0,r.jsx)(i.A,{})]}),k.categories&&(A?Array.from({length:5}).map((e,t)=>(0,r.jsx)(d,{},t)):E.map(e=>(0,r.jsx)(m,{label:e,checked:t.includes(e),onChange:()=>R(e)},e)))]}),(0,r.jsxs)("div",{className:"mb-6",id:"types",children:[(0,r.jsxs)("button",{onClick:()=>q("types"),className:"flex items-center justify-between w-full text-md font-semibold mb-2",children:["Types",k.types?(0,r.jsx)(o.A,{}):(0,r.jsx)(i.A,{})]}),k.types&&(A?Array.from({length:5}).map((e,t)=>(0,r.jsx)(d,{},t)):L.map(e=>(0,r.jsx)(m,{label:e,checked:u.includes(e),onChange:()=>T(e)},e)))]}),(0,r.jsxs)("div",{className:"mb-6",id:"programmes",children:[(0,r.jsxs)("button",{onClick:()=>q("programmes"),className:"flex items-center justify-between w-full text-md font-semibold mb-2",children:["Programmes",k.programmes?(0,r.jsx)(o.A,{}):(0,r.jsx)(i.A,{})]}),k.programmes&&(A?Array.from({length:5}).map((e,t)=>(0,r.jsx)(d,{},t)):P.map(e=>(0,r.jsx)(m,{label:e,checked:h.includes(e),onChange:()=>B(e)},e)))]}),_.length>0&&(0,r.jsxs)("div",{className:"mb-6",id:"locations",children:[(0,r.jsxs)("button",{onClick:()=>q("locations"),className:"flex items-center justify-between w-full text-md font-semibold mb-2",children:["Locations",k.locations?(0,r.jsx)(o.A,{}):(0,r.jsx)(i.A,{})]}),k.locations&&(A?Array.from({length:5}).map((e,t)=>(0,r.jsx)(d,{},t)):_.map(e=>(0,r.jsx)(m,{label:e,checked:x===e,onChange:()=>F(e)},e)))]})]}),(0,r.jsxs)("section",{className:"col-span-3","aria-labelledby":"results-heading",children:[(0,r.jsx)("h2",{id:"results-heading",className:"sr-only",children:"Search Results"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"search-bar",className:"sr-only",children:"Search"}),(0,r.jsx)("input",{id:"search-bar",type:"text",value:f,onChange:e=>j(e.target.value),placeholder:"Search for articles, learning and more...",className:"border border-gray-300 px-4 py-2 w-full rounded"})]}),(0,r.jsx)(c.A,{cards:O,filters:{byQuery:y,byCategory:t,byType:u,byLocation:x,byProgramme:h},paginated:!0,perRow:3,pageCount:v,onPageChange:e=>N(e)})]})]})})})}function p(){return(0,r.jsx)(a.Suspense,{children:(0,r.jsx)(u,{})})}},9327:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var r=s(2115),a=s(7822),l=Object.defineProperty,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,c=(e,t,s)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,m=(e,t)=>{for(var s in t||(t={}))o.call(t,s)&&c(e,s,t[s]);if(n)for(var s of n(t))i.call(t,s)&&c(e,s,t[s]);return e},d=(0,r.forwardRef)((e,t)=>{let s=m(m({},r.useContext(a.h)),e);return r.createElement("svg",m({width:"1.5em",height:"1.5em",strokeWidth:1.5,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"currentColor",ref:t},s),r.createElement("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}))})},4708:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var r=s(2115),a=s(7822),l=Object.defineProperty,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,c=(e,t,s)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,m=(e,t)=>{for(var s in t||(t={}))o.call(t,s)&&c(e,s,t[s]);if(n)for(var s of n(t))i.call(t,s)&&c(e,s,t[s]);return e},d=(0,r.forwardRef)((e,t)=>{let s=m(m({},r.useContext(a.h)),e);return r.createElement("svg",m({width:"1.5em",height:"1.5em",strokeWidth:1.5,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"currentColor",ref:t},s),r.createElement("path",{d:"M6 15L12 9L18 15",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[586,672,862,441,517,358],()=>t(4913)),_N_E=e.O()}]);